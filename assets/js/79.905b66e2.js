(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{511:function(v,t,e){"use strict";e.r(t);var s=e(16),_=Object(s.a)({},(function(){var v=this,t=v.$createElement,e=v._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"vuecli和vite"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vuecli和vite"}},[v._v("#")]),v._v(" VueCLI和Vite")]),v._v(" "),e("p",[v._v("我使用的版本：")]),v._v(" "),e("blockquote",[e("p",[v._v("@vue/cli 5.0.4")])]),v._v(" "),e("p",[v._v("Vue CLI是Vue的脚手架：")]),v._v(" "),e("ul",[e("li",[v._v("CLI是Command-Line Interface，翻译为命令行界面；")]),v._v(" "),e("li",[v._v("我们可以通过CLI选择项目的配置和创建出我们的项目；")]),v._v(" "),e("li",[v._v("Vue CLI已经内置了webpack相关的配置，我们不需要从零开始配置；")])]),v._v(" "),e("h2",{attrs:{id:"认识vue-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#认识vue-cli"}},[v._v("#")]),v._v(" 认识Vue CLI")]),v._v(" "),e("p",[v._v("安装Vue CLI")]),v._v(" "),e("ul",[e("li",[v._v("选择全局安装，这样在任何时候任何位置都可以通过vue的命令来创建项目：")])]),v._v(" "),e("blockquote",[e("p",[v._v("npm install @vue/cli -g")])]),v._v(" "),e("p",[v._v("升级Vue CLI")]),v._v(" "),e("ul",[e("li",[v._v("如果本地装载有旧版本，可以通过下面的命令来升级")])]),v._v(" "),e("blockquote",[e("p",[v._v("npm update @vue/cli -g")])]),v._v(" "),e("p",[v._v("使用Vue的命令来创建项目")]),v._v(" "),e("blockquote",[e("p",[v._v("vue create 项目的名称")])]),v._v(" "),e("p",[v._v("创建一个名称为 "),e("code",[v._v("09_vue_cli_demo")]),v._v(" 的项目，过程如下：")]),v._v(" "),e("blockquote",[e("p",[v._v("vue create 09_vue_cli_demo")])]),v._v(" "),e("p",[v._v("如图：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://s1.ax1x.com/2022/05/29/XMCu7j.png",alt:"vue-cli01"}})]),v._v(" "),e("p",[v._v("这里选择自定义配置(最后一个 "),e("strong",[v._v("Manually select features")]),v._v(" )：")]),v._v(" "),e("ul",[e("li",[v._v("使用上下方向键切换选择；")]),v._v(" "),e("li",[v._v("点击回车键确认选择；")])]),v._v(" "),e("p",[v._v("自定义(如图)：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://s1.ax1x.com/2022/05/29/XMCJjU.png",alt:"vue-cli02"}})]),v._v(" "),e("ul",[e("li",[v._v("使用上下方向键切换选择；")]),v._v(" "),e("li",[v._v("点击空格选中、取消选项；")]),v._v(" "),e("li",[v._v("敲回车键直接跳转下一步；")])]),v._v(" "),e("p",[v._v("选择版本(如图)：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://s1.ax1x.com/2022/05/29/XMCUHJ.png",alt:"vue-cli03"}})]),v._v(" "),e("ul",[e("li",[v._v("使用上下方向键切换选择；")]),v._v(" "),e("li",[v._v("敲回车键直接跳转下一步；")])]),v._v(" "),e("p",[v._v("配置信息(如图)：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://static01.imgkr.com/temp/dfbcf9d314a84955a343beeb74d9c504.png",alt:"vue-cli04"}})]),v._v(" "),e("ul",[e("li",[v._v("使用上下方向键切换选择；")]),v._v(" "),e("li",[v._v("敲回车键直接跳转下一步；")])]),v._v(" "),e("p",[v._v("最后：")]),v._v(" "),e("blockquote",[e("p",[v._v("Save this as a preset for future projects? (y/N)")])]),v._v(" "),e("p",[v._v("是否将其保存为预设的默认配置，选择 yes 就会变成第一张图中："),e("strong",[v._v("我之前保存的自定义配置")]),v._v(" 那样。")]),v._v(" "),e("p",[v._v("如果选择yes，程序还会让你给它起个名字。")]),v._v(" "),e("p",[v._v("项目构建完毕。")]),v._v(" "),e("hr"),v._v(" "),e("h2",{attrs:{id:"认识vite"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#认识vite"}},[v._v("#")]),v._v(" 认识Vite")]),v._v(" "),e("p",[v._v("Webpack是目前整个前端使用最多的构建工具，包括三大框架的脚手架也都是依赖的webpack，但是除了webpack之外也有一些其他的构建工具：")]),v._v(" "),e("ul",[e("li",[v._v("比如rollup、parcel、gulp、 "),e("strong",[v._v("vite")]),v._v(" 等等")])]),v._v(" "),e("p",[v._v("什么是vite呢？")]),v._v(" "),e("ul",[e("li",[v._v("这是由vue开发者写的一个构建工具；")]),v._v(" "),e("li",[v._v("官方的定位是：下一代前端开发与构建工具；")])]),v._v(" "),e("p",[v._v("关于现代构建工具：")]),v._v(" "),e("ul",[e("li",[v._v("我们知道在实际开发中，我们编写的代码往往是不能被浏览器直接识别的，比如ES6、TypeScript、Vue文件等等；")]),v._v(" "),e("li",[v._v("所以我们必须通过构建工具来对代码进行转换、编译，类似的工具有webpack、rollup、parcel；")]),v._v(" "),e("li",[v._v("但是随着项目越来越大，需要处理的代码呈指数级增长，模块越来越多；")]),v._v(" "),e("li",[v._v("构建工具需要很长的时间才能开启服务器，HMR的延迟也越来越大；")])]),v._v(" "),e("p",[v._v('Vite(法语意为"快速的"，发音 /vit/ )是一种新型前端构建工具，能够显著提升前端开发体验。')]),v._v(" "),e("p",[e("strong",[v._v("Vite的构造")])]),v._v(" "),e("p",[v._v("它主要由两部分组成：")]),v._v(" "),e("ul",[e("li",[v._v("一个开发服务器，它基于原生ES模块，提供了丰富的内建功能，HMR的速度非常快；")]),v._v(" "),e("li",[v._v("一套构建指令，它使用rollup打开我们的代码，并且它是预配置的，可以输出生成环境的优化过的静态资源；")])]),v._v(" "),e("p",[e("strong",[v._v("如果我们不借助于构建工具，直接使用ES Module来开发会有什么问题？")])]),v._v(" "),e("ul",[e("li",[v._v("以使用loadash库为例；")]),v._v(" "),e("li",[v._v("首先，我们会发现在使用loadash时，加载了上百个模块的js代码，然而有很多模块我们并不需要，这对于浏览器发送请求是巨大的消耗；")]),v._v(" "),e("li",[v._v("其次，我们的代码中如果有TypeScript、less、vue等代码时，浏览器并不能直接识别；")])]),v._v(" "),e("p",[v._v("使用vite等构建工具可以帮我们解决以上问题。")]),v._v(" "),e("p",[e("strong",[v._v("Vite的安装和使用")])]),v._v(" "),e("p",[v._v("注意：Vite本身也是依赖Node的，所以也需要安装好Node环境")]),v._v(" "),e("ul",[e("li",[v._v("并且Vite要求Node版本是大于12版本的")])]),v._v(" "),e("p",[v._v("下载安装vite：")]),v._v(" "),e("blockquote",[e("p",[v._v("npm install vite -g # 全局安装")]),v._v(" "),e("p",[v._v("npm install vite -D # 局部安装")])]),v._v(" "),e("p",[v._v("通过vite来启动项目：")]),v._v(" "),e("blockquote",[e("p",[v._v("npx vite")])]),v._v(" "),e("p",[e("strong",[v._v("Vite对css的支持")])]),v._v(" "),e("p",[v._v("vite可以直接支持css的处理")]),v._v(" "),e("ul",[e("li",[v._v("直接导入css即可；")])]),v._v(" "),e("p",[v._v("vite可以直接支持css预处理器，比如less")]),v._v(" "),e("ul",[e("li",[e("p",[v._v("直接导入less；")])]),v._v(" "),e("li",[e("p",[v._v("之后安装less编译器；")]),v._v(" "),e("blockquote",[e("p",[v._v("npm install less -D")])])])]),v._v(" "),e("p",[v._v("vite直接支持postcss的转换：")]),v._v(" "),e("ul",[e("li",[e("p",[v._v("只需要安装postcss，并且配置 postcss.config.js 的配置文件即可；")]),v._v(" "),e("blockquote",[e("p",[v._v("npm install postcss postcss-preset-env -D")])])])]),v._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[v._v("// postcss.config.js")]),v._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("{")]),v._v("\n  plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v(":")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("[")]),v._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[v._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[v._v("'postcss-preset-env'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("]")]),v._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("}")]),v._v("\n")])]),v._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[v._v("1")]),e("br"),e("span",{staticClass:"line-number"},[v._v("2")]),e("br"),e("span",{staticClass:"line-number"},[v._v("3")]),e("br"),e("span",{staticClass:"line-number"},[v._v("4")]),e("br"),e("span",{staticClass:"line-number"},[v._v("5")]),e("br"),e("span",{staticClass:"line-number"},[v._v("6")]),e("br")])]),e("p",[e("strong",[v._v("Vite对TypeScript的支持")])]),v._v(" "),e("p",[v._v("vite对TypeScript是原生支持的，它会直接使用 "),e("strong",[v._v("ESBuild")]),v._v(" 来完成编译：")]),v._v(" "),e("ul",[e("li",[v._v("只需要直接导入即可；")])]),v._v(" "),e("p",[v._v("如果我们查看浏览器中的请求，会发现请求的仍然是ts的代码：")]),v._v(" "),e("ul",[e("li",[v._v("这是因为vite中的 "),e("strong",[v._v("服务器Connect")]),v._v(" 会对我们的请求进行转发；")]),v._v(" "),e("li",[v._v("获取ts编译后的代码，给浏览器返回(实际为js的代码)，浏览器可以直接进行解析；")])]),v._v(" "),e("p",[v._v("注意：在vite2中，已经不再使用Koa了，而是使用Connect来搭建的服务器。")]),v._v(" "),e("p",[e("strong",[v._v("vite对vue的支持")])]),v._v(" "),e("p",[v._v("vite无法直接运行vue文件，需要下载安装相应的插件。")]),v._v(" "),e("p",[v._v("vite对vue提供第一优先级支持：")]),v._v(" "),e("ul",[e("li",[v._v("Vue3单文件组件支持 : @vitejs/plugin-vue")]),v._v(" "),e("li",[v._v("Vue3 JSX支持 : @vitejs/plugin-vue-jsx")]),v._v(" "),e("li",[v._v("Vue2 支持 : underfin/vite-plugin-vue2")])]),v._v(" "),e("p",[v._v("安装支持vue的插件：")]),v._v(" "),e("blockquote",[e("p",[v._v("npm install @vitejs/plugin-vue -D")])]),v._v(" "),e("p",[v._v("在vite.config.js中配置插件：")]),v._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[v._v("// vite.config.js")]),v._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("import")]),v._v(" vue "),e("span",{pre:!0,attrs:{class:"token keyword"}},[v._v("from")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[v._v("'@vitejs/plugin-vue'")]),v._v("\n\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(".")]),v._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("{")]),v._v("\n  plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[v._v(":")]),v._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("[")]),v._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[v._v("vue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v(")")]),v._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("]")]),v._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[v._v("}")]),v._v("\n")])]),v._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[v._v("1")]),e("br"),e("span",{staticClass:"line-number"},[v._v("2")]),e("br"),e("span",{staticClass:"line-number"},[v._v("3")]),e("br"),e("span",{staticClass:"line-number"},[v._v("4")]),e("br"),e("span",{staticClass:"line-number"},[v._v("5")]),e("br"),e("span",{staticClass:"line-number"},[v._v("6")]),e("br"),e("span",{staticClass:"line-number"},[v._v("7")]),e("br"),e("span",{staticClass:"line-number"},[v._v("8")]),e("br")])]),e("p",[e("strong",[v._v("Vite打包项目")])]),v._v(" "),e("p",[v._v("我们可以直接通过vite build来完成对当前项目的打包工具：")]),v._v(" "),e("blockquote",[e("p",[v._v("npx vite build")])]),v._v(" "),e("p",[v._v("我们可以通过preview的方式，开启一个本地服务来预览打包后的效果：")]),v._v(" "),e("blockquote",[e("p",[v._v("npx vite preview")])]),v._v(" "),e("h2",{attrs:{id:"认识esbuild"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#认识esbuild"}},[v._v("#")]),v._v(" 认识ESBuild")]),v._v(" "),e("p",[e("a",{attrs:{href:"https://esbuild.docschina.org/",target:"_blank",rel:"noopener noreferrer"}},[v._v("esbuild 中文文档"),e("OutboundLink")],1)]),v._v(" "),e("p",[v._v("官方定位：极速 JavaScript 打包器")]),v._v(" "),e("p",[v._v("2022/5/16 官网数据：")]),v._v(" "),e("blockquote",[e("p",[v._v("esbuild : 0.33s")]),v._v(" "),e("p",[v._v("parcel 2 : 32.48s")]),v._v(" "),e("p",[v._v("rollup + terser : 34.95s")]),v._v(" "),e("p",[v._v("webpack 5 : 41.53s")])]),v._v(" "),e("p",[e("em",[v._v("以上数据：分别是使用各工具的默认配置， 并从 0 开始构建 10 份")]),v._v(" "),e("a",{attrs:{href:"https://github.com/mrdoob/three.js",target:"_blank",rel:"noopener noreferrer"}},[v._v("three.js"),e("OutboundLink")],1),v._v(" 库的构建时间， 其中包括代码压缩以及 source map。 更多信息请查阅 "),e("em",[e("a",{attrs:{href:"https://esbuild.docschina.org/faq/#benchmark-details",target:"_blank",rel:"noopener noreferrer"}},[v._v("此处"),e("OutboundLink")],1)]),v._v(" 了解更多。")]),v._v(" "),e("p",[v._v("esbuild 构建工具的核心目标是开创构建工具性能的新时代， 同时创建一个易于使用的现代构建工具。")]),v._v(" "),e("p",[v._v("主要特性：")]),v._v(" "),e("ul",[e("li",[v._v("极快的速度，无需缓存")]),v._v(" "),e("li",[v._v("支持 ES6 和 CommonJS 模块")]),v._v(" "),e("li",[v._v("支持对 ES6 模块进行 tree shaking")]),v._v(" "),e("li",[e("a",{attrs:{href:"https://esbuild.docschina.org/api/",target:"_blank",rel:"noopener noreferrer"}},[v._v("API"),e("OutboundLink")],1),v._v(" 可同时用于 JavaScript 和 Go")]),v._v(" "),e("li",[v._v("兼容 "),e("a",{attrs:{href:"https://esbuild.docschina.org/content-types/#typescript",target:"_blank",rel:"noopener noreferrer"}},[v._v("TypeScript"),e("OutboundLink")],1),v._v(" 和 "),e("a",{attrs:{href:"https://esbuild.docschina.org/content-types/#jsx",target:"_blank",rel:"noopener noreferrer"}},[v._v("JSX"),e("OutboundLink")],1),v._v(" 语法")]),v._v(" "),e("li",[v._v("支持 "),e("a",{attrs:{href:"https://esbuild.docschina.org/api/#sourcemap",target:"_blank",rel:"noopener noreferrer"}},[v._v("Source maps"),e("OutboundLink")],1)]),v._v(" "),e("li",[v._v("支持 "),e("a",{attrs:{href:"https://esbuild.docschina.org/api/#minify",target:"_blank",rel:"noopener noreferrer"}},[v._v("Minification"),e("OutboundLink")],1),v._v(" (代码压缩)")]),v._v(" "),e("li",[v._v("支持 "),e("a",{attrs:{href:"https://esbuild.docschina.org/plugins/",target:"_blank",rel:"noopener noreferrer"}},[v._v("plugins"),e("OutboundLink")],1),v._v(" (扩展其他插件)")])]),v._v(" "),e("p",[v._v("ESBuild为什么这么快呢？")]),v._v(" "),e("ul",[e("li",[v._v("使用Go语言编写的，可以直接转换成机器代码，而无需经过字节码；")]),v._v(" "),e("li",[v._v("ESBuild可以充分利用CPU的多内核，尽可能让它们饱和运行；")]),v._v(" "),e("li",[v._v("ESBuild的所有内容都是从零开始编写的，而不是使用第三方，所以从一开始就可以考虑各种性能问题；")]),v._v(" "),e("li",[v._v("……")])]),v._v(" "),e("h2",{attrs:{id:"vite脚手架工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vite脚手架工具"}},[v._v("#")]),v._v(" Vite脚手架工具")]),v._v(" "),e("p",[v._v("在开发中，我们不可能所有的项目都是用vite从零去搭建，")]),v._v(" "),e("p",[v._v("所以vite还给我们提供了对应的脚手架工具。")]),v._v(" "),e("p",[v._v("即vite是有两个工具的：")]),v._v(" "),e("ul",[e("li",[v._v("vite : 相当于是一个构建工具，类似于webpack、rollup；")]),v._v(" "),e("li",[v._v("@vitejs/create-app : 类似vue-cli、create-react-app；")])]),v._v(" "),e("p",[v._v("使用脚手架：")]),v._v(" "),e("p",[v._v("语法糖：")]),v._v(" "),e("blockquote",[e("p",[v._v("npm init @vitejs/app")])]),v._v(" "),e("p",[v._v("完整写法(推荐)：")]),v._v(" "),e("blockquote",[e("p",[v._v("npm install @vitejs/create-app -g")]),v._v(" "),e("p",[v._v("create-app")])]),v._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[v._v("#")]),v._v(" 参考")]),v._v(" "),e("p",[e("a",{attrs:{href:"https://ke.qq.com/course/3453141",target:"_blank",rel:"noopener noreferrer"}},[v._v("深入Vue3+TypeScript技术栈-coderwhy"),e("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=_.exports}}]);